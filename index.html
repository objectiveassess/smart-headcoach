<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì¡°ê¸°ì¶•êµ¬ 4ì¿¼í„° í¬ë©”ì´ì…˜ ìë™ ë°°ì •</title>
<style>
body {
  font-family: 'Noto Sans KR', sans-serif;
  background: #0b1622;
  color: #f0f6fc;
  margin: 0;
  padding: 0;
}
.container {
  max-width: 900px;
  margin: 30px auto;
  background: rgba(255,255,255,0.05);
  border-radius: 10px;
  padding: 20px;
}
h1 {
  text-align: center;
  color: #00c896;
}
input, select, button {
  padding: 8px;
  border-radius: 6px;
  border: none;
  margin: 4px;
}
input, select {
  width: 100%;
}
button {
  background: #00c896;
  color: #0b1622;
  font-weight: 600;
  cursor: pointer;
}
button:hover {
  background: #00e6aa;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
  font-size: 14px;
}
th, td {
  padding: 8px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  text-align: left;
}
.quarter {
  margin-top: 25px;
  background: rgba(255,255,255,0.03);
  border-radius: 8px;
  padding: 10px;
}
.flex {
  display: flex;
  gap: 6px;
  align-items: center;
}
</style>
</head>
<body>
<div class="container">
  <h1>âš½ ì¡°ê¸°ì¶•êµ¬ 4ì¿¼í„° ìë™ ë°°ì • (Diamond 4-4-2)</h1>
  <p>ì´ë¦„ê³¼ í¬ì§€ì…˜ì„ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ì¿¼í„°ë³„ í¬ë©”ì´ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤.<br>
  ğŸ§¤ ê³¨í‚¤í¼ëŠ” 4ì¿¼í„° ì „ë¶€ ê³ ì •, ë‚˜ë¨¸ì§€ëŠ” 3ì¿¼í„° ì´í•˜ë§Œ ë°°ì •ë©ë‹ˆë‹¤.</p>

  <div id="player-inputs"></div>
  <button onclick="addPlayer()">+ ì„ ìˆ˜ ì¶”ê°€</button>
  <button onclick="generateSchedule()">âœ… í¬ë©”ì´ì…˜ ìƒì„±</button>

  <div id="result"></div>
</div>

<script>
let players = [];

function addPlayer() {
  const div = document.createElement('div');
  div.className = 'flex';
  div.innerHTML = `
    <input type="text" placeholder="ì´ë¦„" class="name">
    <select class="pos1">
      <option value="">1ìˆœìœ„ í¬ì§€ì…˜</option>
      <option>GK</option><option>CB</option><option>RB</option><option>LB</option>
      <option>CDM</option><option>CM</option><option>CAM</option>
      <option>ST</option><option>RW</option><option>LW</option>
    </select>
    <select class="pos2">
      <option value="">2ìˆœìœ„ í¬ì§€ì…˜</option>
      <option>GK</option><option>CB</option><option>RB</option><option>LB</option>
      <option>CDM</option><option>CM</option><option>CAM</option>
      <option>ST</option><option>RW</option><option>LW</option>
    </select>
  `;
  document.getElementById('player-inputs').appendChild(div);
}

function generateSchedule() {
  players = [];
  const rows = document.querySelectorAll('#player-inputs .flex');
  rows.forEach(r => {
    const name = r.querySelector('.name').value.trim();
    const pos1 = r.querySelector('.pos1').value;
    const pos2 = r.querySelector('.pos2').value;
    if (name) players.push({ name, pos1, pos2, count: 0 });
  });

  if (players.length < 11) {
    alert('ìµœì†Œ 11ëª… ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”!');
    return;
  }

  const gk = players.find(p => p.pos1 === 'GK' || p.pos2 === 'GK');
  if (!gk) {
    alert('ê³¨í‚¤í¼(GK)ê°€ ë°˜ë“œì‹œ 1ëª… ì´ìƒ í•„ìš”í•©ë‹ˆë‹¤!');
    return;
  }

  // GK 4ì¿¼í„° ê³ ì •
  const GK = gk.name;
  gk.count = 4;

  const fieldPlayers = players.filter(p => p.name !== GK);

  // í¬ì§€ì…˜ ê·¸ë£¹ë³„ ë¶„ë¥˜
  const defenders = fieldPlayers.filter(p => ['CB','RB','LB'].includes(p.pos1) || ['CB','RB','LB'].includes(p.pos2));
  const mids = fieldPlayers.filter(p => ['CDM','CM','CAM'].includes(p.pos1) || ['CDM','CM','CAM'].includes(p.pos2));
  const forwards = fieldPlayers.filter(p => ['ST','RW','LW'].includes(p.pos1) || ['ST','RW','LW'].includes(p.pos2));

  const quarters = [[],[],[],[]];

  for (let q = 0; q < 4; q++) {
    const lineup = [];
    lineup.push({pos:'GK', name:GK});

    // ìˆ˜ë¹„ 4ëª…
    let defs = pick(defenders,4);
    // ë¯¸ë“œí•„ë” 4ëª…
    let midsel = pick(mids,4);
    // ê³µê²©ìˆ˜ 2ëª…
    let fwds = pick(forwards,2);

    lineup.push(...defs, ...midsel, ...fwds);
    quarters[q] = lineup;
  }

  // ì¶œë ¥
  let html = '';
  for (let i = 0; i < 4; i++) {
    html += `<div class="quarter"><h3>ğŸ•’ ${i+1}ì¿¼í„° (25ë¶„)</h3><table><tr><th>í¬ì§€ì…˜</th><th>ì´ë¦„</th></tr>`;
    quarters[i].forEach(p => {
      html += `<tr><td>${p.pos}</td><td>${p.name}</td></tr>`;
    });
    html += '</table></div>';
  }

  // ì¶œì „ íšŸìˆ˜ ìš”ì•½
  html += '<h3>âš–ï¸ ì¶œì „ ì¿¼í„° ìš”ì•½</h3><table><tr><th>ì´ë¦„</th><th>ì¶œì „ ìˆ˜</th></tr>';
  players.forEach(p => {
    html += `<tr><td>${p.name}</td><td>${p.count}</td></tr>`;
  });
  html += '</table>';

  document.getElementById('result').innerHTML = html;
}

function pick(pool, n) {
  // ì¶œì „ì´ ì ì€ ìˆœìœ¼ë¡œ ìš°ì„  ì •ë ¬
  const sorted = [...pool].sort((a,b)=>a.count-b.count);
  const chosen = [];
  for (let p of sorted) {
    if (chosen.length >= n) break;
    if (p.count < 3) { // ìµœëŒ€ 3ì¿¼í„° ì œí•œ
      chosen.push({pos: p.pos1 || 'ê¸°íƒ€', name: p.name});
      p.count++;
    }
  }
  return chosen;
}
</script>
</body>
</html>
